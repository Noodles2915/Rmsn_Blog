<div id="comment-{{ comment.id }}" class="comment" style="margin-left: {{ offset }}px; margin-top:12px; padding:12px; border:1px solid #e6e9ef; border-radius:8px; background:#fff;">
    <div style="display:flex; gap:8px; align-items:center;">
        <div style="width:36px; height:36px; border-radius:50%; background:#f0f4f8; display:inline-flex; align-items:center; justify-content:center; font-weight:700; color:#2b6cb0;">{{ comment.author|slice:":1"|upper }}</div>
        <div>
            <div style="font-weight:700;">{{ comment.author }}</div>
            <div style="font-size:12px; color:#6b7280;">{{ comment.created_at|date:"Y-m-d H:i" }}</div>
        </div>
    </div>

    <div style="margin-top:8px;">
        <div class="comment-content">{{ comment.content|safe }}</div>
    </div>

    <div style="margin-top:8px; display:flex; gap:8px; align-items:center;">
        <button class="btn-reply" data-comment-id="{{ comment.id }}" style="background:none; border:none; color:#2b6cb0; font-weight:600; cursor:pointer;">回复</button>
    </div>

    <div class="reply-form-container" id="reply-form-{{ comment.id }}" style="display:none; margin-top:12px;">
        <form method="post" action="{% url 'posting:add_comment' post.id %}">
            {% csrf_token %}
            <input type="hidden" name="parent_id" value="{{ comment.id }}">
            <div class="form-group">
                <textarea name="content" rows="4" style="width:100%; padding:8px; border:1px solid #e6e9ef; border-radius:6px;"></textarea>
            </div>
            <div style="margin-top:8px;">
                <button type="submit" class="btn btn-primary" style="background:#2b6cb0; color:#fff; padding:6px 12px; border-radius:6px;">提交回复</button>
                <button type="button" class="btn-cancel-reply" data-comment-id="{{ comment.id }}" style="margin-left:8px; padding:6px 12px; border-radius:6px; border:1px solid #e6e9ef;">取消</button>
            </div>
        </form>
    </div>

    <div class="replies-container" style="margin-top:12px;">
    {% for reply in comment.replies.all %}
        {% include "_comment.html" with comment=reply offset=offset|add:24 post=post %}
    {% endfor %}
    </div>
</div>
